<h1>Cart</h1>

<%= form_tag cart_update_path, :method => :post  do %>
<div id="cart">
  <table class="table table-bordered table-striped" width="600">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Quantity</th> 
        <th>Price</th> 
        <th>Subtotal</th>
        <th>Remove?</th>
      </tr>
    </thead>
    <tbody>
    <% @cart.cart_products.each do |cp| %>
      <tr id="cart_item_<%= cp.product.id %>">
        <td><%= cp.product.title %></td>
        <td>
          <%= text_field_tag "cp_id_quant[#{cp.id}]", cp.quantity, :size => 4, :class => "quantity" %>
        </td> 
        <td class="cart_item_price"><%= cp.price %></td>
        <td class="cart_item_total"><%= cp.total %></td>
        <td><%= link_to 'Remove Item', cart_remove_product_path(:cp_id => cp.id), :class => 'btn btn-warning', :method => :post, 
            :confirm => 'Are you sure?' %>
      </tr>
    <% end %> 
    </tbody>
  </table>
</div>

<div class="form-actions">
  <%= link_to 'Keep Shopping', store_index_path, :class => 'btn'  %>
  <%= submit_tag "Update Cart", :class => 'btn', :id => "update_cart" %>
  <%= link_to 'Checkout', checkout_path, :class => 'btn' %> 
</div>
<% end %>